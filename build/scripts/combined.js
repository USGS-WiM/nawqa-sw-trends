function addCommas(e){e+="";for(var t=e.split("."),i=t[0],a=t.length>1?"."+t[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");return i+a}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}var allLayers,renderer;require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","dojo/domReady!"],function(e,t,i,a,s,r){var n=null;renderer=new a(n,"all_pest_trends.trend_int");var o=new r(r.STYLE_SQUARE,15,new s(s.STYLE_SOLID,new esri.Color([255,0,0]),1),new esri.Color([255,0,0,.25])),l=new r(r.STYLE_SQUARE,10,new s(s.STYLE_SOLID,new esri.Color([255,0,0]),1),new esri.Color([255,0,0,.25])),c=new r(r.STYLE_SQUARE,5,new s(s.STYLE_SOLID,new esri.Color([255,0,0]),1),new esri.Color([255,0,0,.25])),d=new r(r.STYLE_SQUARE,5,new s(s.STYLE_SOLID,new esri.Color([255,255,255]),1),new esri.Color([0,0,0,.25])),p=new r(r.STYLE_SQUARE,5,new s(s.STYLE_SOLID,new esri.Color([0,255,0]),1),new esri.Color([0,255,0,.25])),u=new r(r.STYLE_SQUARE,10,new s(s.STYLE_SOLID,new esri.Color([0,255,0]),1),new esri.Color([0,255,0,.25])),g=new r(r.STYLE_SQUARE,15,new s(s.STYLE_SOLID,new esri.Color([0,255,0]),1),new esri.Color([0,255,0,.25]));renderer.addValue(3,o),renderer.addValue(2,l),renderer.addValue(1,c),renderer.addValue(0,d),renderer.addValue(-1,p),renderer.addValue(-2,u),renderer.addValue(-3,g),allLayers=[{groupHeading:"sites",showGroupHeading:!1,includeInLayerList:!1,layers:{"pest layer":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/0",options:{id:"pestSites",opacity:1,mode:i.MODE_ONDEMAND,outFields:["*"],defaultDefinitionExpression:"Pesticide = 'Alachlor' AND period = 'P10'",visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!1,hasOpacitySlider:!0,includeLegend:!0}},"Eco Sites layer":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/1",options:{id:"ecoSites",opacity:1,mode:i.MODE_ONDEMAND,outFields:["*"],visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!1,hasOpacitySlider:!0,includeLegend:!0}},"WRTDS Concentration Sites":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/2",options:{id:"wrtdsSites",opacity:1,mode:i.MODE_ONDEMAND,outFields:["wrtds_sites.Station_nm","wrtds_sites.Site_no","wrtds_sites.staAbbrev","wrtds_sites.agency1","wrtds_sites.db_source","wrtds_sites.dec_lat_va","wrtds_sites.dec_long_va","wrtds_sites.drainSqKm","wrtds_sites.huc_cd"],visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!1,hasOpacitySlider:!0,includeLegend:!0}},"WRTDS Flux Sites":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/3",options:{id:"wrtdsFluxSites",opacity:1,mode:i.MODE_ONDEMAND,outFields:["wrtds_sites.Station_nm","wrtds_sites.Site_no","wrtds_sites.staAbbrev","wrtds_sites.agency1","wrtds_sites.db_source","wrtds_sites.dec_lat_va","wrtds_sites.dec_long_va","wrtds_sites.drainSqKm","wrtds_sites.huc_cd"],visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!1,hasOpacitySlider:!0,includeLegend:!0}},2012:{url:"http://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu2012_100515_test/ImageServer",options:{id:"lu2012",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,exclusiveGroupName:"Land use",hasOpacitySlider:!0,includeLegend:!0}},2002:{url:"http://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu2002_100515_test/ImageServer",options:{id:"lu2002",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,exclusiveGroupName:"Land use",hasOpacitySlider:!0,includeLegend:!0}},1992:{url:"http://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu1992_100515_test/ImageServer",options:{id:"lu1992",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,exclusiveGroupName:"Land use",hasOpacitySlider:!0,includeLegend:!0}},1982:{url:"http://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu1982_100515_test/ImageServer",options:{id:"lu1982",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,exclusiveGroupName:"Land use",hasOpacitySlider:!0,includeLegend:!0}},1974:{url:"http://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu1974_100515_test/ImageServer",options:{id:"lu1974",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,exclusiveGroupName:"Land use",hasOpacitySlider:!0,includeLegend:!0}}}}]});var map,allLayers,maxLegendHeight,maxLegendDivHeight,dragInfoWindows=!0,defaultMapCenter=[-95.6,38.6],constObj,currentConstType="",currentSiteNo="",currentConst="Total Phosphorous";require(["esri/arcgis/utils","esri/Color","esri/map","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Multipoint","esri/geometry/Point","esri/graphicsUtils","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/tasks/query","esri/geometry/webMercatorUtils","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,i,a,s,r,n,o,l,c,d,p,u,g,y,m,f,v,b,h,S,w,_){function T(){var e=$("#pesticideSelect").val();currentConst=e;var t=$("input[name=trendPeriod]:checked").val(),i="Pesticide = '"+e+"' AND period = '"+t+"'";map.getLayer("pestSites").setDefinitionExpression(i),map.getLayer("pestSites").setVisibility(!0)}function L(){var e=$($("#typeSelect")[0][$("#typeSelect")[0].selectedIndex].attributes.select.value).val();currentConst=e;var t=$("input[name=trendPeriod]:checked").val(),i="";"P10"==t?i="AND (EcoTrendResults_Nyear = 8 OR EcoTrendResults_Nyear = 9 OR EcoTrendResults_Nyear = 10 OR EcoTrendResults_Nyear = 11)":"P20"==t&&(i="AND (EcoTrendResults_Nyear = 18 OR EcoTrendResults_Nyear = 19 OR EcoTrendResults_Nyear = 20)");var a="EcoTrendResults_y = '"+e+"' "+i;console.log(a),map.getLayer("ecoSites").setDefinitionExpression(""),map.getLayer("ecoSites").setDefinitionExpression(a)}function x(){var e="",t=$("#typeSelect").val();currentConst=t,"Nutrients"==t?e=$("#nutrientsSelect").val():"Carbon"==t?e=$("#carbonSelect").val():"Major ions"==t?e=$("#majorIonsSelect").val():"Salinity"==t?e=$("#salinitySelect").val():"Sediment"==t&&(e=$("#sedimentSelect").val()),"Specific conductance"==e?($("#load").prop("disabled",!0),$("input:radio[name=trendType]")[0].checked=!0):$("#load").prop("disabled",!1);var i,a=$("input[name=trendType]:checked").val();"concentration"==a?(i=map.getLayer("wrtdsSites"),i.setVisibility(!0)):"load"==a&&(i=map.getLayer("wrtdsFluxSites"),i.setVisibility(!0));var s=$("input[name=trendPeriod]:checked").val(),r="";"P10"==s?r="2002":"P20"==s?r="1992":"P30"==s?r="1982":"P40"==s&&(r="1972");var n="wrtds_trends_wm.id_unique LIKE '%"+e+"%"+r+"'";i.setDefinitionExpression(n)}function E(){1===S.byId("chkExtent").checked?z.activeGeocoder.searchExtent=map.extent:z.activeGeocoder.searchExtent=null}function O(){E();var e=z.find();e.then(function(e){C(e)}),$("#geosearchModal").modal("hide")}function D(e){k();var t=e.graphic?e.graphic:e.result.feature;t.setSymbol(G)}function C(e){if(e=e.results,e.length>0){k();for(var t=0;t<e.length;t++);var i=new p(e[0].feature.geometry);map.centerAndZoom(i,17)}}function k(){map.infoWindow.hide(),map.graphics.clear()}function I(e,t,i,a,s){return new g({angle:0,xoffset:t,yoffset:i,type:"esriPMS",url:e,contentType:"image/png",width:a,height:s})}if(!jQuery.support.cors&&window.XDomainRequest){var P=/^https?:\/\//i,q=/^get|post$/i,N=new RegExp("^"+location.protocol,"i"),R=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(e,t,i){if(e.crossDomain&&e.async&&q.test(e.type)&&P.test(t.url)&&N.test(t.url)){var a=null,s=(t.dataType||"").toLowerCase();return{send:function(i,r){a=new XDomainRequest,/^\d+$/.test(t.timeout)&&(a.timeout=t.timeout),a.ontimeout=function(){r(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},i={text:a.responseText};try{if("json"===s)try{i.json=JSON.parse(a.responseText)}catch(n){t.code=500,t.message="parseerror"}else if("xml"===s||"text"!==s&&R.test(a.contentType)){var o=new ActiveXObject("Microsoft.XMLDOM");o.async=!0;try{o.loadXML(a.responseText)}catch(n){o=void 0}if(!o||!o.documentElement||o.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;i.xml=o}}catch(l){throw l}finally{r(t.code,t.message,i,e)}},a.onerror=function(){r(500,"error",{text:a.responseText})},a.open(e.type,e.url),a.send()},abort:function(){a&&a.abort()}}}})}jQuery.support.cors=!0,$.ajax({dataType:"json",type:"GET",url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/4/query?where=include_in_mapper_+%3D+%27include%27&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=false&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=Model%2CParameter_name&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json",headers:{Accept:"*/*"},success:function(e){constObj=e,$.each(e.features,function(e,t){null!=t.attributes.Model&&("SEAWAVE-Q"==t.attributes.Model?$("#pesticideSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Algae"==t.attributes.Tentative____Parameter_group?$("#algaeSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Fish"==t.attributes.Tentative____Parameter_group?$("#fishSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Macroinvertebrates"==t.attributes.Tentative____Parameter_group?$("#macroinvertSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Carbon"==t.attributes.Tentative____Parameter_group?$("#carbonSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Major ions"==t.attributes.Tentative____Parameter_group?$("#majorIonsSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Nutrients"==t.attributes.Tentative____Parameter_group?$("#nutrientsSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Salinity"==t.attributes.Tentative____Parameter_group?$("#salinitySelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)):"Sediment"==t.attributes.Tentative____Parameter_group&&$("#sedimentSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.Parameter_name)))}),$("#typeSelect").val("Nutrients"),$("#nutrientsSelect").val("Total Phosphorus"),$("#ecologySelect").val("DiaHighMot"),$("#pesticideSelect").val("Acetochlor")},error:function(e){console.log("Error processing the JSON. The error is:"+e)}}),map=i("mapDiv",{basemap:"topo",center:defaultMapCenter,zoom:5});var M=new a({map:map},"homeButton");M.startup();var j=new s({map:map},"locateButton");j.startup(),$("#aboutModal").modal("show"),$("#legendButton").click(),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")});var F=["pestSites","ecoSites","wrtdsSites","wrtdsFluxSites"];$("#typeSelect").on("change",function(e){var t=e.currentTarget.value;$(".constSelect").hide(),$.each(F,function(e,t){map.getLayer(t).setVisibility(!1)}),("Pesticides"==t||"Algae"==t||"Fish"==t||"Macroinvertebrates"==t)&&($("#trend1input").checked||$("#trend2input").checked||$("#trend1input").prop("checked",!0));var i=e.currentTarget[e.currentTarget.selectedIndex].attributes.select.value;$(i).show(),currentConst=t,"Nutrients"==t||"Carbon"==t||"Major ions"==t||"Salinity"==t||"Sediment"==t?($("#trendTypes").show(),$("#trend4,#trend3").show(),x()):"Pesticides"==t?($("#trendTypes").show(),$("#trend4,#trend3").hide(),$("#load").prop("disabled",!1),T()):("Algae"==t||"Fish"==t||"Macroinvertebrates"==t)&&($("#trendTypes").hide(),$("#trend4,#trend3").hide(),$("#load").prop("disabled",!1),L(),map.getLayer("ecoSites").setVisibility(!0))}),$("#pesticideSelect").on("change",function(e){var t=e.currentTarget.value;currentConst=t;var i=$("input[name=trendPeriod]:checked").val(),a="Pesticide = '"+t+"' AND period = '"+i+"'";map.getLayer("pestSites").setDefinitionExpression(a)}),$(".ecoSelect").on("change",function(e){var t=e.currentTarget.value;currentConst=t;var i=$("input[name=trendPeriod]:checked").val(),a="";"P10"==i?a="AND (EcoTrendResults_Nyear  = 8 OR EcoTrendResults_Nyear  = 9 OR EcoTrendResults_Nyear  = 10 OR EcoTrendResults_Nyear  = 11)":"P20"==i&&(a="AND (EcoTrendResults_Nyear  = 18 OR EcoTrendResults_Nyear  = 19 OR EcoTrendResults_Nyear  = 20)");var s="EcoTrendResults_y = '"+t+"' "+a;map.getLayer("ecoSites").setDefinitionExpression(s)}),$(".wrtdsSelect").on("change",function(e){var t=e.currentTarget.value;currentConst=t;var i;"Specific conductance"==t?($("#load").prop("disabled",!0),$("input:radio[name=trendType]")[0].checked=!0):$("#load").prop("disabled",!1);var a=$("input[name=trendType]:checked").val();"concentration"==a?(i=map.getLayer("wrtdsSites"),i.setVisibility(!0)):"load"==a&&(i=map.getLayer("wrtdsFluxSites"),i.setVisibility(!0));var s=$("input[name=trendPeriod]:checked").val(),r="";"P10"==s?r="2002":"P20"==s?r="1992":"P30"==s?r="1982":"P40"==s&&(r="1972");var n="wrtds_trends_wm.id_unique LIKE '%"+t+"%"+r+"'";i.setDefinitionExpression(n)}),$(".trendPeriod").on("change",function(e){var t=e.currentTarget.value,i=$($("#typeSelect")[0][$("#typeSelect")[0].selectedIndex].attributes.select.value).val();if("Pesticides"==$("#typeSelect")[0].value){var i=$("#pesticideSelect").val();currentConst=i;var a="Pesticide = '"+i+"' AND period = '"+t+"'";map.getLayer("pestSites").setDefinitionExpression(a)}else if("Algae"==$("#typeSelect")[0].value||"Fish"==$("#typeSelect")[0].value||"Macroinvertebrates"==$("#typeSelect")[0].value){var s="";currentConst=i,"P10"==t?s="AND (EcoTrendResults_Nyear  = 8 OR EcoTrendResults_Nyear  = 9 OR EcoTrendResults_Nyear  = 10 OR EcoTrendResults_Nyear  = 11)":"P20"==t&&(s="AND (EcoTrendResults_Nyear  = 18 OR EcoTrendResults_Nyear  = 19 OR EcoTrendResults_Nyear  = 20)");var a="EcoTrendResults_y = '"+i+"' "+s;console.log(a),map.getLayer("ecoSites").setDefinitionExpression(a)}else if("Nutrients"==$("#typeSelect")[0].value||"Carbon"==$("#typeSelect")[0].value||"Major ions"==$("#typeSelect")[0].value||"Salinity"==$("#typeSelect")[0].value||"Sediment"==$("#typeSelect")[0].value){var r,n=$("input[name=trendType]:checked").val();"concentration"==n?(r=map.getLayer("wrtdsSites"),r.setVisibility(!0),map.getLayer("wrtdsFluxSites").setVisibility(!1)):"load"==n&&(r=map.getLayer("wrtdsFluxSites"),r.setVisibility(!0),map.getLayer("wrtdsSites").setVisibility(!1));var s="";"P10"==t?s="2002":"P20"==t?s="1992":"P30"==t?s="1982":"P40"==t&&(s="1972");var i=$($("#typeSelect")[0][$("#typeSelect")[0].selectedIndex].attributes.select.value).val();currentConst=t;var a="wrtds_trends_wm.id_unique LIKE '%"+i+"%"+s+"'";r.setDefinitionExpression(a)}}),$(".trendType").on("change",function(e){var t=e.currentTarget.value,i=$($("#typeSelect")[0][$("#typeSelect")[0].selectedIndex].attributes.select.value).val();if("Pesticides"==$("#typeSelect")[0].value);else if("Algae"==$("#typeSelect")[0].value||"Fish"==$("#typeSelect")[0].value||"Macroinvertebrates"==$("#typeSelect")[0].value);else if("Nutrients"==$("#typeSelect")[0].value||"Carbon"==$("#typeSelect")[0].value||"Major ions"==$("#typeSelect")[0].value||"Salinity"==$("#typeSelect")[0].value||"Sediment"==$("#typeSelect")[0].value){var a;$.each(F,function(e,t){map.getLayer(t).setVisibility(!1)}),"concentration"==t?a=map.getLayer("wrtdsSites"):"load"==t&&(a=map.getLayer("wrtdsFluxSites"));var s="",r=$("input[name=trendPeriod]:checked").val();"P10"==r?s="2002":"P20"==r?s="1992":"P30"==r?s="1982":"P40"==r&&(s="1972");$("#typeSelect").val();currentConst=i;var n="wrtds_trends_wm.id_unique LIKE '%"+i+"%"+s+"'";a.setDefinitionExpression(n),a.setVisibility(!0)}}),_(map,"load",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=v.webMercatorToGeographic(map.extent.getCenter());if($("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3)),1==dragInfoWindows){var i=h(".title",map.infoWindow.domNode)[0],a=new b(map.infoWindow.domNode,{handle:i});_(a,"FirstMove",function(){var e=h(".outerPointer",map.infoWindow.domNode)[0];w.add(e,"hidden");var e=h(".pointer",map.infoWindow.domNode)[0];w.add(e,"hidden")}.bind(this))}}),_(map,"zoom-end",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),_(map,"mouse-move",function(e){if($("#mapCenterLabel").css("display","none"),null!=e.mapPoint){var t=v.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}}),_(map,"pan-end",function(){$("#mapCenterLabel").css("display","inline");var e=v.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(e.y.toFixed(3)),$("#longitude").html(e.x.toFixed(3))});var A=new n("https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer");_(S.byId("btnStreets"),"click",function(){map.setBasemap("streets"),map.removeLayer(A)}),_(S.byId("btnSatellite"),"click",function(){map.setBasemap("satellite"),map.removeLayer(A)}),_(S.byId("btnHybrid"),"click",function(){map.setBasemap("hybrid"),map.removeLayer(A)}),_(S.byId("btnTerrain"),"click",function(){map.setBasemap("terrain"),map.removeLayer(A)}),_(S.byId("btnGray"),"click",function(){map.setBasemap("gray"),map.removeLayer(A)}),_(S.byId("btnNatGeo"),"click",function(){map.setBasemap("national-geographic"),map.removeLayer(A)}),_(S.byId("btnOSM"),"click",function(){map.setBasemap("osm"),map.removeLayer(A)}),_(S.byId("btnTopo"),"click",function(){map.setBasemap("topo"),map.removeLayer(A)}),_(S.byId("btnNatlMap"),"click",function(){map.addLayer(A)}),_(map,"click",function(e){}),$("#siteInfoDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,maxWidth:800,maxHeight:500}),$("#siteInfoDiv .dropdown").prepend("<div id='siteInfoClose' title='close'><b>X</b></div>"),$("#siteInfoDiv .dropdown").prepend("<div id='siteInfoMin' title='collapse'><b>_</b></div>"),$("#siteInfoMin").click(function(){$("#siteInfoDiv").css("visibility","hidden")}),$("#siteInfoClose").click(function(){$("#siteInfoDiv").css("visibility","hidden")});var H="",V="";map.on("layer-add",function(e){var i=e.layer.id;e.layer;if("pestSites"==i||"wrtdsSites"==i||"ecoSites"==i||"wrtdsFluxSites"==i){if("wrtdsSites"==i){map.getLayer("wrtdsSites").graphics;map.getLayer("wrtdsSites").setDefinitionExpression("wrtds_trends_wm.id_unique LIKE '%Total Phosphorus%2002'"),map.getLayer("wrtdsSites").setVisibility(!0)}map.getLayer(i).on("click",function(e){map.graphics.clear();var a=new y(y.STYLE_SOLID,new m(m.STYLE_DASHDOT,new t([255,0,0]),2),new t([255,255,0,.25]));map.graphics.add(new c(e.mapPoint,a)),$("#siteInfoDiv").css("visibility","visible");var s=$("#siteInfoDiv").data("lobiPanel"),r=$(document).height(),n=$(document).width(),o=.9,l=r*o,d=n*o;500>r&&$("#siteInfoDiv").height(l),500>n&&$("#siteInfoDiv").width(d);var p=e.x,u=e.y;s.setPosition(p,u),1==s.isPinned()&&s.unpin();var g=e.graphic.attributes;if($("#siteInfoTabPane").empty(),H=i,"ecoSites"==i)currentSiteNo=g.EcoSiteSummary_no_headers_csv_Ecology_site_ID,$("#siteInfoTabPane").append("<br/><b>Site name: </b>"+g.EcoSiteSummary_no_headers_csv_Ecology_site_name+"<br/><b>Site number: </b>"+g.EcoSiteSummary_no_headers_csv_Ecology_site_ID+"<br/><b>Latitude: </b>"+g.EcoSiteSummary_no_headers_csv_LatDD+"<br/><b>Longitude: </b>"+g.EcoSiteSummary_no_headers_csv_LngDD+"<br/>");else if("pestSites"==i){currentSiteNo=g["pest10yrsites.pstaid"],$("#siteInfoTabPane #charts").click(function(e){console.log("event"+e.toString())});var f="";"P10"==g["all_pest_trends_wm.period"]?f="results10":"P20"==g["all_pest_trends_wm.period"]&&(f="results20");var v=g["all_pest_trends_wm.pname"];4==v.length&&(v="0"+v),V="https://wim.usgs.gov/sw-trends-data/pest_charts/"+f+"/"+g["all_pest_trends_wm.period"]+"_"+g["pest10yrsites.pstaid"]+"_FinalRun"+v+".pdf",$("#siteInfoTabPane").append("<br/><b>Site name: </b>"+g["all_pest_trends_wm.Site"]+"<br/><b>Site number: </b>"+g["pest10yrsites.pstaid"]+"<br/><b>Agency: </b>"+g["pest10yrsites.agency"]+"<br/><b>Latitude: </b>"+g["pest10yrsites.LAT"]+"<br/><b>Longitude: </b>"+g["pest10yrsites.LONG_"]+"<br/><b>Drainage area: </b>"+g["pest10yrsites.DA"]+"<br/>")}else("wrtdsSites"==i||"wrtdsFluxSites"==i)&&(currentSiteNo=g["wrtds_sites.Site_no"],$("#siteInfoTabPane").append("<br/><b>Site name: </b>"+g["wrtds_sites.Station_nm"]+"<br/><b>Site number: </b>"+g["wrtds_sites.Site_no"]+"<br/><b>State: </b>"+g["wrtds_sites.staAbbrev"]+"<br/><b>Agency: </b>"+g["wrtds_sites.agency1"]+"<br/><b>Data source: </b>"+g["wrtds_sites.db_source"]+"<br/><b>Latitude: </b>"+g["wrtds_sites.dec_lat_va"]+"<br/><b>Longitude: </b>"+g["wrtds_sites.dec_long_va"]+"<br/><b>Drainage area: </b>"+g["wrtds_sites.drainSqKm"]+"<br/><b>HUC8: </b>"+g["wrtds_sites.huc_cd"]+"<br/>"))})}("wrtdsSites"==i||"wrtdsFluxSites"==i)&&map.getLayer(i).on("query-limit-exceeded",function(e){alert("exceeded")})});var z=new o({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:map},"geosearch");z.startup(),z.on("select",D),z.on("findResults",C),z.on("clear",k),_(z.inputNode,"keydown",function(e){13==e.keyCode&&E()});var G=I("../images/purple-pin.png",0,12,13,24);map.on("load",function(){map.infoWindow.set("highlight",!1),map.infoWindow.set("titleInBody",!1)}),_(S.byId("btnGeosearch"),"click",O),$(document).ready(function(){function e(){$("#geosearchModal").modal("show")}function t(){$("#aboutModal").modal("show")}function i(){if("pestSites"==H)window.open(V,"_blank");else{$.ajax({dataType:"json",type:"GET",url:"https://services.wim.usgs.gov/proxies/sbProxy/Default.aspx?q=sessionid",headers:{Accept:"*/*"},success:function(e){var t=e,i=currentConst+"_"+currentSiteNo,a=i.replace(" ","%20"),s="https://www.sciencebase.gov/catalog/items?s=Search&q="+a+"&format=json&josso="+t.jossoSessionId;console.log(s),$.ajax({dataType:"json",type:"GET",url:s,headers:{Accept:"*/*"},success:function(e){var i=e;if(console.log(i),i.items.length>0){var a="https://www.sciencebase.gov/catalog/item/"+i.items[0].id+"?format=json&josso="+t.jossoSessionId;$.ajax({dataType:"json",type:"GET",url:a,headers:{Accept:"*/*"},success:function(e){var t=e;$.each(t.files,function(e,t){switch(console.log(t.url),t.name){case"plotConcTime.png":$("#pConc").attr("src",t.url);break;case"boxConcMonth.png":$("#bConc").attr("src",t.url);break;case"plotConcPred.png":$("#pConcPred").attr("src",t.url);break;case"plotFluxPred.png":$("#pFluxPred").attr("src",t.url);break;case"plotConcHistBoot.png":$("#pConcHistBoot").attr("src",t.url);break;case"plotFluxHistBoot.png":$("#pFluxHistBoot").attr("src",t.url)}}),console.log(t)},error:function(e){console.log("Error processing the JSON. The error is:"+e)}})}},error:function(e){console.log("Error processing the JSON. The error is:"+e)}})},error:function(e){console.log("Error processing the JSON. The error is:"+e)}}),$("#pConc").attr("src",""),$("#bConc").attr("src",""),$("#pConcPred").attr("src",""),$("#pFluxPred").attr("src",""),$("#pConcHistBoot").attr("src",""),$("#pFluxHistBoot").attr("src",""),$("#chartModal").modal("show")}}function a(){$("#tableModal").modal("show"),$.ajax({dataType:"json",type:"GET",url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/swTrendSites_test/MapServer/2/query?where=wrtds_trends_wm.Site_no+%3D+%2705587455%27&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=wrtds_trends_wm.param_nm%2Cwrtds_trends_wm.id_unique%2Cwrtds_trends_wm.likeC%2C+wrtds_trends_wm.likeF&returnGeometry=false&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=true&resultOffset=&resultRecordCount=&f=json",headers:{Accept:"*/*"},success:function(e){constObj=e;var t=[];$.each(e.features,function(e,i){t.push([i.attributes["wrtds_trends_wm.param_nm"],i.attributes["wrtds_trends_wm.id_unique"],i.attributes["wrtds_trends_wm.likeC"].toFixed(5),i.attributes["wrtds_trends_wm.likeF"].toFixed(5)])});var i=document.getElementById("tableDiv");$("#tableDiv").html("");var a=new Handsontable(i,{data:t,rowHeaders:!0,colHeaders:!0});a.updateSettings({colHeaders:["Parameter","id_unique","LikeC","LikeF"]})},error:function(e){console.log("Error processing the JSON. The error is:"+e)}})}$("#geosearchNav").click(function(){e()}),$("#aboutNav").click(function(){t()}),$("#userGuideNav").click(function(){$("#userGuideModal").modal("show")}),$("#faqNav").click(function(){$("#faqModal").modal("show")}),$("#charts").click(function(){i()}),$("#table").click(function(){a()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),$("#faq1header").click(function(){$("#faq1body").slideToggle(250)}),$("#faq2header").click(function(){$("#faq2body").slideToggle(250)}),$("#faq3header").click(function(){$("#faq3body").slideToggle(250)}),$("#faq4header").click(function(){$("#faq4body").slideToggle(250)}),$("#faq5header").click(function(){$("#faq5body").slideToggle(250)}),$("#faq6header").click(function(){$("#faq6body").slideToggle(250)}),$("#faq7header").click(function(){$("#faq7body").slideToggle(250)}),$("#faq8header").click(function(){$("#faq8body").slideToggle(250)}),$("#faq9header").click(function(){$("#faq9body").slideToggle(250)}),$("#faq10header").click(function(){$("#faq10body").slideToggle(250)}),$("#faq11header").click(function(){$("#faq11body").slideToggle(250)}),$("#faq12header").click(function(){$("#faq12body").slideToggle(250)}),$("#faq13header").click(function(){$("#faq13body").slideToggle(250)}),$("#faq14header").click(function(){$("#faq14body").slideToggle(250)})}),require(["esri/dijit/Legend","esri/tasks/locator","esri/tasks/query","esri/tasks/QueryTask","esri/graphicsUtils","esri/geometry/Point","esri/geometry/Extent","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/SpatialReference","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","dijit/form/CheckBox","dijit/form/RadioButton","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on"],function(e,t,i,a,s,n,o,l,c,d,p,u,g,y,m,f,v,b,h,S){function w(e,t,i,a,s,r,n){if(map.addLayer(i),T.push([s,camelize(a),i]),s){if(!$("#"+camelize(s)).length){var o;if("Data Source"==s)var o=$('<div id="'+camelize(s+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+s+'<span id="info'+camelize(s)+'" title="Data Source identifies the scale, year and emulsion of the imagery that was used to map the wetlands and riparian areas for a given area. It also identifies areas that have Scalable data, which is an interim data product in areas of the nation where standard compliant wetland data is not yet available. Click for more info on Scalable data." class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(s)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button> </div>');else var o=$('<div id="'+camelize(s+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+s+"</button> </div>");o.click(function(e){o.find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$.each(T,function(e,t){var i=map.getLayer(t[2].id);if(t[0]==s)if($("#"+t[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&o.find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",t[1]),map.addLayer(t[2]);var i=map.getLayer(t[2].id);i.setVisibility(!0)}else if(o.find("i.glyphspan").hasClass("fa-square-o")){console.log("removing layer: ",t[1]);var i=map.getLayer(t[2].id);i.setVisibility(!1)}})});var l=$('<div id="'+camelize(s)+'" class="btn-group-vertical" data-toggle="buttons"></div>');$("#toggle").append(l),console.log("here")}if(i.visible)var c=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(s)+'" autocomplete="off"><i class="glyphspan fa fa-dot-circle-o '+camelize(s)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");else var c=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(s)+'" autocomplete="off"><i class="glyphspan fa fa-circle-o '+camelize(s)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");$("#"+camelize(s)).append(c),c.click(function(e){if($(this).find("i.glyphspan").hasClass("fa-circle-o")){$(this).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o");var t=$(this)[0].id;$.each(T,function(e,i){if(i[0]==s)if(i[1]==t&&$("#"+camelize(s+" Root")).find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",i[1]),map.addLayer(i[2]);var a=map.getLayer(i[2].id);a.setVisibility(!0)}else if(i[1]==t&&$("#"+camelize(s+" Root")).find("i.glyphspan").hasClass("fa-square-o"))console.log("group heading not checked");else{console.log("removing layer: ",i[1]);var a=map.getLayer(i[2].id);a.setVisibility(!1),$("#"+i[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&$("#"+i[1]).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o")}})}})}else if(n.includeInLayerList){if(i.visible&&void 0!==n.hasOpacitySlider&&1==n.hasOpacitySlider&&void 0!==n.moreinfo&&n.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(!i.visible&&void 0!==n.hasOpacitySlider&&1==n.hasOpacitySlider&&void 0!==n.moreinfo&&n.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(i.visible&&void 0!==n.hasOpacitySlider&&1==n.hasOpacitySlider)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(i.visible||void 0===n.hasOpacitySlider||1!=n.hasOpacitySlider)if(i.visible&&void 0!==n.moreinfo&&n.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');else if(!i.visible&&void 0!==n.moreinfo&&n.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(i.visible)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+"</button></span></div>");else var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+"</button> </div>");else var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');
c.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),i.visible?i.setVisibility(!1):i.setVisibility(!0),n.otherLayersToggled&&$.each(n.otherLayersToggled,function(e,t){var a=map.getLayer(t);a.setVisibility(i.visible)})})}if(void 0!==t){var d=camelize(e);if(!$("#"+d).length){if(t)var p=$('<div id="'+d+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");else var p=$('<div id="'+d+'"></div>');$("#toggle").append(p)}if(s){if($("#"+d).append(o),$("#"+d).append(l),void 0!==n.moreinfo&&n.moreinfo){var u="#info"+camelize(s),g=$(u);g.click(function(e){window.open(n.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}if($("#opacity"+camelize(s)).length>0){var u="#opacity"+camelize(s),y=$(u);y.click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(r.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(r.id).setOpacity(t),n.otherLayersToggled&&$.each(n.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}}else{if($("#"+d).append(c),void 0!==n.moreinfo&&n.moreinfo){var u="#info"+camelize(a),g=$(u);g.click(function(e){window.open(n.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}$("#opacity"+camelize(a)).length>0&&$("#opacity"+camelize(a)).click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(r.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(r.id).setOpacity(t),n.otherLayersToggled&&$.each(n.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}}else if($("#toggle").append(c),void 0!==n.moreinfo&&n.moreinfo){var u="#info"+camelize(a),g=$(u);g.click(function(e){alert(e.currentTarget.id),e.preventDefault(),e.stopPropagation()})}}var _=[],T=[];$.each(allLayers,function(e,t){console.log("processing: ",t.groupHeading),$.each(t.layers,function(e,i){var a=e;("pest layer"==a||"Eco Sites layer"==a||"WRTDS Concentration Sites"==a||"WRTDS Flux Sites"==a)&&(a="Trend results");var s="";if(i.wimOptions.exclusiveGroupName&&(s=i.wimOptions.exclusiveGroupName),"agisFeature"===i.wimOptions.layerType){var n=new c(i.url,i.options);void 0!==i.wimOptions.renderer&&n.setRenderer(i.wimOptions.renderer),i.wimOptions&&1==i.wimOptions.includeLegend&&_.unshift({layer:n,title:a}),w(t.groupHeading,t.showGroupHeading,n,e,s,i.options,i.wimOptions)}else if("agisWMS"===i.wimOptions.layerType){var n=new p(i.url,{resourceInfo:i.options.resourceInfo,visibleLayers:i.options.visibleLayers},i.options);i.wimOptions&&1==i.wimOptions.includeLegend&&_.unshift({layer:n,title:a}),w(t.groupHeading,t.showGroupHeading,n,e,s,i.options,i.wimOptions)}else if("agisDynamic"===i.wimOptions.layerType){var n=new l(i.url,i.options);if(i.visibleLayers&&n.setVisibleLayers(i.visibleLayers),i.wimOptions&&i.wimOptions.layerDefinitions){var o=[];$.each(i.wimOptions.layerDefinitions,function(e,t){o[e]=t}),n.setLayerDefinitions(o)}i.wimOptions&&1==i.wimOptions.includeLegend&&_.unshift({layer:n,title:a}),w(t.groupHeading,t.showGroupHeading,n,e,s,i.options,i.wimOptions)}else if("agisImage"===i.wimOptions.layerType){var n=new r(i.url,i.options);i.wimOptions&&1==i.wimOptions.includeLegend&&_.unshift({layer:n,title:a}),i.visibleLayers&&n.setVisibleLayers(i.visibleLayers),w(t.groupHeading,t.showGroupHeading,n,e,s,i.options,i.wimOptions)}})});var L=new e({map:map,layerInfos:_},"legendDiv");L.startup()})}),$(document).ready(function(){});